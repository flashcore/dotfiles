#!/bin/bash

# Courtesy: https://github.com/jessfraz/dotfiles

# Removes stopped containers
docker_rm_stopped(){
    running=`sudo docker ps -q`
    stopped=`sudo docker ps -aq | grep -v $running`
    sudo docker rm -f $stopped
}


# Stop all containers
docker_stop_all(){
sudo docker stop `sudo docker ps -q`
}

# Removes all docker Images ** DANGER **
docker_rm_imgs(){
echo "Are you sure want to delete all Docker images?"
read a
if [ "$a" == "yes" ];
then
sudo docker rmi -f `sudo docker images -q --no-trunc` > /dev/null
else
  echo "Aborted!"
fi
}


# Removes stopped container images
docker_rm_stopped_imgs(){

	mapfile -t images < <(docker images -q --no-trunc)
	for c in $(docker ps -aq); do
		image=$(docker inspect --format '{{.Image}}' "$c")
		images=( "${images[@]/$image}" )
	done

	docker rmi -f "${images[@]}" 2>&1 || true

}
